{
  "branchName": "ralph/shiny-to-react-conversion",
  "projectName": "Shiny to React Conversion - Peskas Timor Portal",
  "description": "Convert the Golem Shiny app to React while maintaining exact visual appearance, layout, colors, and functionality",
  "userStories": [
    {
      "id": "US-001",
      "title": "Analyze Shiny app structure and create component mapping",
      "description": "Read all Shiny R files, document the app structure, tabs, modules, and create a mapping document of Shiny modules to React components. Identify all color palettes, chart types, and layouts used.",
      "acceptanceCriteria": [
        "Complete list of all Shiny tabs and their modules",
        "Document all chart types and visualization libraries used",
        "Extract color palettes from Shiny code",
        "Create mapping document in scripts/ralph/shiny-analysis.md"
      ],
      "passes": true
    },
    {
      "id": "US-002a",
      "title": "Create TypeScript interfaces for core data files",
      "description": "Sample JSON files in public/data/ and create TypeScript interfaces for: aggregated.json, pars.json, summary_data.json, indicators_grid.json. Focus only on type definitions, no utilities yet.",
      "acceptanceCriteria": [
        "TypeScript interface file created at src/types/data.ts",
        "Interfaces for 4 core data files: Aggregated, Pars, SummaryData, IndicatorsGrid",
        "All nested structures properly typed",
        "No TypeScript errors when building"
      ],
      "passes": true
    },
    {
      "id": "US-002b",
      "title": "Create TypeScript interfaces for remaining data files",
      "description": "Complete TypeScript interfaces for remaining data files: municipal_aggregated.json, municipal_taxa.json, nutrients_aggregated.json, taxa_aggregated.json, taxa_names.json, predicted_tracks.json, data_last_updated.json, label_groups_list.json, var_dictionary.json",
      "acceptanceCriteria": [
        "All 9 remaining interfaces added to src/types/data.ts",
        "Complex nested structures properly typed (taxa, nutrients, tracks)",
        "Array types correctly defined",
        "No TypeScript errors when building"
      ],
      "passes": true
    },
    {
      "id": "US-002c",
      "title": "Create data loading utilities and hooks",
      "description": "Create reusable utilities for loading JSON data. Include: fetchData utility function, useData custom hook for React components, error handling, loading states.",
      "acceptanceCriteria": [
        "src/utils/dataLoader.ts created with fetchData function",
        "src/hooks/useData.ts created with useData hook",
        "Error handling and loading states included",
        "Generic type support for type-safe data loading"
      ],
      "passes": true
    },
    {
      "id": "US-002d",
      "title": "Test data loading and create mapping documentation",
      "description": "Test data loading with 3-4 different data files, create examples, and document the data mapping from Shiny R to TypeScript in scripts/ralph/data-mapping.md",
      "acceptanceCriteria": [
        "Test component created showing data loading from 3+ files",
        "Data correctly typed and displays without errors",
        "scripts/ralph/data-mapping.md documents Shinyâ†’React data mapping",
        "Include examples of how to use the data utilities"
      ],
      "passes": true
    },
    {
      "id": "US-003a",
      "title": "Setup Home page structure and layout",
      "description": "Create Home page component with correct Tabler UI grid layout matching Shiny. Include page heading, intro text section (from pars.json), and grid structure for map + charts + table. No data loading yet, just layout.",
      "acceptanceCriteria": [
        "src/pages/Home.tsx created with Tabler grid layout",
        "Page heading matches Shiny",
        "Grid structure ready for: map, 3 donut charts, summary table",
        "Intro text loaded from pars.json i18n",
        "No TypeScript errors"
      ],
      "passes": true
    },
    {
      "id": "US-003b1",
      "title": "Install and configure React Leaflet library",
      "description": "Install react-leaflet and leaflet packages. Create basic type declarations if needed. Verify library loads without errors.",
      "acceptanceCriteria": [
        "react-leaflet and leaflet installed via npm",
        "No TypeScript errors after installation",
        "Build passes with new dependencies"
      ],
      "passes": true
    },
    {
      "id": "US-003b2",
      "title": "Create basic FishingMap component",
      "description": "Create src/components/FishingMap.tsx with a simple Leaflet map component. Use placeholder center/zoom. No styling yet, just get basic map rendering.",
      "acceptanceCriteria": [
        "src/components/FishingMap.tsx created",
        "Component renders a basic Leaflet map",
        "No TypeScript errors",
        "Component exports properly"
      ],
      "passes": true
    },
    {
      "id": "US-003b3",
      "title": "Add FishingMap to Home page with correct coordinates",
      "description": "Import FishingMap into Home.tsx, add to map card. Set center to lat:-8.75, lng:125.7, zoom:8. Verify in browser.",
      "acceptanceCriteria": [
        "Map displays on Home page in map card",
        "Correct center coordinates: lat:-8.75, lng:125.7",
        "Zoom level: 8",
        "Browser verification passes"
      ],
      "passes": true
    },
    {
      "id": "US-003b4",
      "title": "Style FishingMap to match Shiny basemap",
      "description": "Apply basemap tile layer to match Shiny. Check tab_home_content.R for basemap URL. Apply map styling (height, responsive container).",
      "acceptanceCriteria": [
        "Basemap matches Shiny styling",
        "Map height matches Shiny",
        "Map is responsive within grid",
        "Browser verification passes"
      ],
      "passes": true
    },
    {
      "id": "US-003c1",
      "title": "Create reusable DonutChart component",
      "description": "Create src/components/charts/DonutChart.tsx using ApexCharts. Accept props for data, title, colors. Simple placeholder data to test rendering.",
      "acceptanceCriteria": [
        "src/components/charts/DonutChart.tsx created",
        "Component accepts title, data, colors props",
        "Renders a basic donut chart with placeholder data",
        "No TypeScript errors"
      ],
      "passes": true
    },
    {
      "id": "US-003c2",
      "title": "Add 3 donut chart instances to Home page",
      "description": "Import DonutChart into Home.tsx. Add 3 instances in the grid (trips, revenue, fish). Use placeholder data. Match card layout from Shiny.",
      "acceptanceCriteria": [
        "3 donut chart cards display on Home page",
        "Cards positioned correctly in grid (col-md-4 each)",
        "Titles: Trips, Revenue, Fish",
        "Chart height: 16rem (from Shiny)",
        "Browser verification passes"
      ],
      "passes": true
    },
    {
      "id": "US-003c3",
      "title": "Load aggregated data into donut charts",
      "description": "Use useData hook to load aggregated.json. Extract trip, revenue, and catch data. Pass to DonutChart components. Verify data displays correctly.",
      "acceptanceCriteria": [
        "Data loaded from aggregated.json",
        "Donut charts display real data (not placeholder)",
        "Data values match aggregated.json",
        "Browser verification passes"
      ],
      "passes": true
    },
    {
      "id": "US-003c4",
      "title": "Extract and document donutBlue color palette",
      "description": "Read shiny-analysis.md to find donutBlue palette hex values. Create src/constants/colors.ts file with donutBlue palette constant. No chart updates yet.",
      "acceptanceCriteria": [
        "src/constants/colors.ts created",
        "donutBlue palette constant with hex values",
        "Build passes with no TypeScript errors"
      ],
      "passes": true
    },
    {
      "id": "US-003c5",
      "title": "Apply donutBlue colors to Home donut charts",
      "description": "Import donutBlue colors from src/constants/colors.ts. Update all 3 DonutChart components on Home page to use donutBlue palette. Verify in browser.",
      "acceptanceCriteria": [
        "Colors imported from src/constants/colors.ts",
        "All 3 donut charts use donutBlue palette",
        "Browser verification passes"
      ],
      "passes": true
    },
    {
      "id": "US-003d1",
      "title": "Create SummaryTable component structure",
      "description": "Create src/components/SummaryTable.tsx. Load indicators_grid.json. Create basic table structure with Tabler table component. No formatting yet.",
      "acceptanceCriteria": [
        "src/components/SummaryTable.tsx created",
        "Data loaded from indicators_grid.json",
        "Basic table structure renders",
        "No TypeScript errors"
      ],
      "passes": true
    },
    {
      "id": "US-003d2",
      "title": "Add SummaryTable to Home page",
      "description": "Import SummaryTable into Home.tsx. Add to grid below donut charts. Verify table displays. No formatting changes yet.",
      "acceptanceCriteria": [
        "Summary table imported and added to Home.tsx",
        "Table displays in grid below donut charts",
        "Build passes with no TypeScript errors",
        "Browser verification passes"
      ],
      "passes": true
    },
    {
      "id": "US-003d3",
      "title": "Apply formatting and styling to SummaryTable",
      "description": "Apply number formatting using pars.json multipliers. Match Shiny table column layout and styling exactly.",
      "acceptanceCriteria": [
        "Number formatting with correct units (using pars.json multipliers)",
        "Table layout matches Shiny exactly",
        "Table styling matches Shiny",
        "Browser verification passes"
      ],
      "passes": true
    },
    {
      "id": "US-004a",
      "title": "Setup Composition page structure",
      "description": "Create Composition page component with Tabler layout. Add page heading, filter section placeholder, and grid for treemaps. Reference tab_catch_composition.R for layout.",
      "acceptanceCriteria": [
        "src/pages/Composition.tsx created",
        "Page heading and intro text",
        "Layout structure for filters + treemaps",
        "No TypeScript errors"
      ],
      "passes": true
    },
    {
      "id": "US-004b1",
      "title": "Research and install treemap library",
      "description": "Research ApexCharts treemap support. If not supported, install alternative (e.g., recharts, d3-hierarchy). Verify library works with TypeScript.",
      "acceptanceCriteria": [
        "Treemap library decision documented",
        "Library installed via npm",
        "No TypeScript errors after installation",
        "Build passes"
      ],
      "passes": false
    },
    {
      "id": "US-004b2",
      "title": "Create TreemapChart component",
      "description": "Create src/components/charts/TreemapChart.tsx. Accept props for data, colors. Render basic treemap with placeholder data.",
      "acceptanceCriteria": [
        "src/components/charts/TreemapChart.tsx created",
        "Component renders basic treemap",
        "Accepts data and colors props",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-004b3",
      "title": "Add TreemapChart to Composition page with data",
      "description": "Import TreemapChart into Composition.tsx. Load taxa_aggregated.json. Add treemap to page grid. Verify data displays.",
      "acceptanceCriteria": [
        "Treemap displays on Composition page",
        "Data loaded from taxa_aggregated.json",
        "Treemap shows correct hierarchical data",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-004b4",
      "title": "Apply habitat_palette colors and interactions",
      "description": "Extract habitat_palette from shiny-analysis.md. Apply to treemap. Add hover/click interactions to match Shiny.",
      "acceptanceCriteria": [
        "Colors match habitat_palette from Shiny",
        "Treemap interactions work (hover, click)",
        "Layout matches Shiny",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-004c1",
      "title": "Create filter components for Composition page",
      "description": "Create filter UI components (municipality, date, habitat type) on Composition page. Use Tabler form components. No filter logic yet, just UI.",
      "acceptanceCriteria": [
        "Filter UI components render on Composition page",
        "Municipality, date, and habitat filters display",
        "Filters styled with Tabler components",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-004c2",
      "title": "Connect filters to treemap data",
      "description": "Add filter state management. Connect filter changes to treemap data updates. Implement 500ms debounce for municipality filter. Match Shiny filter behavior.",
      "acceptanceCriteria": [
        "Filters update treemap data when changed",
        "Municipality filter uses 500ms debounce",
        "Filter behavior matches Shiny",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-005a1",
      "title": "Create Catch page structure",
      "description": "Create src/pages/Catch.tsx with Tabler layout. Add page heading, intro text. Create grid structure for time series chart and metric cards. No charts yet.",
      "acceptanceCriteria": [
        "src/pages/Catch.tsx created",
        "Page heading and intro text",
        "Grid structure for chart + cards",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-005a2",
      "title": "Create TimeSeriesChart component",
      "description": "Create src/components/charts/TimeSeriesChart.tsx using ApexCharts. Accept props for data, title, colors. Render basic line chart with placeholder data.",
      "acceptanceCriteria": [
        "src/components/charts/TimeSeriesChart.tsx created",
        "Component renders basic ApexCharts line chart",
        "Accepts data, title, colors props",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-005a3",
      "title": "Add time series to Catch page with data",
      "description": "Import TimeSeriesChart into Catch.tsx. Load aggregated.json. Add chart to page. Pass catch over time data. Verify displays correctly.",
      "acceptanceCriteria": [
        "Time series chart displays on Catch page",
        "Data loaded from aggregated.json",
        "Chart shows catch over time",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-005a4",
      "title": "Style time series chart to match Shiny",
      "description": "Apply Shiny colors to time series. Format axes and labels to match Shiny. Verify chart styling matches exactly.",
      "acceptanceCriteria": [
        "Chart colors match Shiny",
        "Axes and labels formatted correctly",
        "Chart height and spacing match Shiny",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-005b",
      "title": "Add metrics cards to Catch page",
      "description": "Create summary metric cards for Catch page showing totals, averages, trends. Use Tabler card components. Match Shiny styling.",
      "acceptanceCriteria": [
        "Metric cards display key catch statistics",
        "Card layout matches Shiny",
        "Numbers formatted with correct units",
        "Cards responsive in grid",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-006a1",
      "title": "Create Market page structure",
      "description": "Create src/pages/Market.tsx with Tabler layout. Add page heading, intro text. Create grid structure for price charts. No charts yet.",
      "acceptanceCriteria": [
        "src/pages/Market.tsx created",
        "Page heading and intro text",
        "Grid structure for charts",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-006a2",
      "title": "Add price charts to Market page",
      "description": "Create price visualizations (bar/line charts) using ApexCharts. Load data from aggregated.json. Match Shiny chart types and colors.",
      "acceptanceCriteria": [
        "Price charts display correctly",
        "Chart types match Shiny (bar/line)",
        "Data loaded from aggregated.json",
        "Colors match Shiny palette",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-007a1",
      "title": "Create Nutrients page structure",
      "description": "Create src/pages/Nutrients.tsx with Tabler layout. Add page heading, intro text. Create grid structure for nutrient bar charts. No charts yet.",
      "acceptanceCriteria": [
        "src/pages/Nutrients.tsx created",
        "Page heading and intro text",
        "Grid structure for charts",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-007a2",
      "title": "Add nutrient bar charts with interactions",
      "description": "Create horizontal bar charts showing nutrient composition using ApexCharts. Load from nutrients_aggregated.json. Add hover highlighting. Match Shiny colors.",
      "acceptanceCriteria": [
        "Nutrient bars display correctly",
        "Data loaded from nutrients_aggregated.json",
        "Hover highlighting works",
        "Colors match Shiny",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-008a1",
      "title": "Create Revenue page structure",
      "description": "Create src/pages/Revenue.tsx with Tabler layout. Add page heading, intro text. Create grid structure for time series and breakdown charts. No charts yet.",
      "acceptanceCriteria": [
        "src/pages/Revenue.tsx created",
        "Page heading and intro text",
        "Grid structure for charts",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-008a2",
      "title": "Add revenue charts with formatting",
      "description": "Create revenue time series and breakdown charts using ApexCharts. Load from aggregated.json. Apply currency formatting and multipliers. Match Shiny styling.",
      "acceptanceCriteria": [
        "Revenue charts display correctly",
        "Data loaded from aggregated.json",
        "Chart styling matches Shiny",
        "Data formatting correct (currency, multipliers)",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-009a1",
      "title": "Install and configure DeckGL libraries",
      "description": "Install deck.gl, @deck.gl/layers, @deck.gl/react. Install map provider (MapLibre or React Map GL). Verify libraries work with TypeScript.",
      "acceptanceCriteria": [
        "deck.gl and required layers installed",
        "Map provider library installed",
        "No TypeScript errors after installation",
        "Build passes"
      ],
      "passes": false
    },
    {
      "id": "US-009a2",
      "title": "Create Tracks page structure with basic map",
      "description": "Create src/pages/Tracks.tsx with Tabler layout. Add page heading. Create basic DeckGL map component with basemap. No hexagon layer yet.",
      "acceptanceCriteria": [
        "src/pages/Tracks.tsx created",
        "Page heading and intro text",
        "Basic DeckGL map displays with basemap",
        "No TypeScript errors",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-009a3",
      "title": "Add hexagon layer to Tracks map",
      "description": "Load predicted_tracks.json. Create HexagonLayer using DeckGL. Add layer to map. Use placeholder colors. Verify hexagons render.",
      "acceptanceCriteria": [
        "Data loaded from predicted_tracks.json",
        "HexagonLayer added to DeckGL map",
        "Hexagons display fishing track density",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-009a4",
      "title": "Apply viridis/heatmap colors to hexagons",
      "description": "Extract viridis or heatmapColors palette from shiny-analysis.md. Apply to HexagonLayer. Add map interactions. Match Shiny styling exactly.",
      "acceptanceCriteria": [
        "Colors match Shiny viridis/heatmap palette",
        "Map interactions work (hover, zoom, pan)",
        "Hexagon styling matches Shiny",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-010a",
      "title": "Add Conservation region visualizations",
      "description": "Implement conservation region module with region-specific charts and data displays. Match mod_region_conservation.R functionality.",
      "acceptanceCriteria": [
        "Conservation region component created",
        "Region visualizations display correctly",
        "Data accuracy verified",
        "Styling matches Shiny",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-011a",
      "title": "Implement global filter state management",
      "description": "Create React Context or state management for filters (municipality, date range) that persists across pages. Share filter state between all pages.",
      "acceptanceCriteria": [
        "Filter context created (src/context/FilterContext.tsx)",
        "Municipality and date filters available globally",
        "Filter state persists when navigating between pages",
        "Reset filters functionality works",
        "No TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-011b1",
      "title": "Connect Home page to global filters",
      "description": "Update Home page to consume global filter context. Apply filters to donut charts and summary table. Verify filter updates work.",
      "acceptanceCriteria": [
        "Home page consumes FilterContext",
        "Donut charts and table respond to filter changes",
        "Filter behavior matches Shiny",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-011b2",
      "title": "Connect Composition and Catch pages to global filters",
      "description": "Update Composition and Catch pages to consume global filter context. Apply filters to visualizations. Verify updates work.",
      "acceptanceCriteria": [
        "Composition and Catch pages consume FilterContext",
        "Charts respond to filter changes",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-011b3",
      "title": "Connect remaining pages to global filters",
      "description": "Update Market, Revenue, Nutrients, Tracks pages to consume global filter context. Verify all pages work with filters.",
      "acceptanceCriteria": [
        "All remaining pages consume FilterContext",
        "All pages respond to filter changes",
        "Performance is acceptable",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-012a1",
      "title": "Extract all color palettes from Shiny",
      "description": "Read shiny-analysis.md and Shiny R files. Extract all 6 color palettes (habitatPalette, tabPalette, donutBlue, spiderColors, viridis, heatmapColors). Document in scripts/ralph/color-palettes.md with hex values.",
      "acceptanceCriteria": [
        "scripts/ralph/color-palettes.md created",
        "All 6 palettes documented with hex values",
        "Source files noted for each palette"
      ],
      "passes": false
    },
    {
      "id": "US-012a2",
      "title": "Add remaining color palettes to constants file",
      "description": "Update src/constants/colors.ts with all remaining palettes (habitatPalette, tabPalette, spiderColors, viridis, heatmapColors). donutBlue already exists from US-003c4.",
      "acceptanceCriteria": [
        "All 6 palettes in src/constants/colors.ts",
        "Palettes exported as constants",
        "Build passes with no TypeScript errors"
      ],
      "passes": false
    },
    {
      "id": "US-012a3",
      "title": "Audit and update chart colors",
      "description": "Audit all existing charts (donut, treemap, time series, etc). Update charts to use color constants from src/constants/colors.ts. Verify colors match Shiny.",
      "acceptanceCriteria": [
        "All charts use color constants from src/constants/colors.ts",
        "Colors match Shiny exactly",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-012b",
      "title": "Verify spacing and layout consistency",
      "description": "Audit all pages for spacing, margins, padding to match Shiny exactly. Use browser dev tools to compare. Adjust as needed.",
      "acceptanceCriteria": [
        "All page layouts match Shiny spacing",
        "Card margins and padding correct",
        "Chart spacing within grid correct",
        "Responsive breakpoints work correctly",
        "Browser verification passes"
      ],
      "passes": false
    },
    {
      "id": "US-013a",
      "title": "Extract and implement all i18n text keys",
      "description": "Extract all text from Shiny R files and pars.json. Add to React i18n files. Ensure language switching works.",
      "acceptanceCriteria": [
        "All Shiny text keys identified and documented",
        "Text keys added to src/i18n.tsx or locale files",
        "Language switching tested and works",
        "All pages use i18n for text (no hardcoded strings)",
        "Text matches Shiny exactly in both languages"
      ],
      "passes": false
    },
    {
      "id": "US-014a",
      "title": "Final visual QA and polish",
      "description": "Side-by-side comparison of Shiny app and React app. Create checklist. Fix any remaining visual differences, spacing issues, or missing elements. Test all interactions.",
      "acceptanceCriteria": [
        "QA checklist created and all items passing",
        "All pages visually match Shiny",
        "No layout differences",
        "All interactive elements work",
        "Performance is acceptable (no lag, fast loading)",
        "Browser verification complete on all pages"
      ],
      "passes": false
    }
  ]
}
